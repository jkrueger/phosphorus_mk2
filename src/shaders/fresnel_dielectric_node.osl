#include "fresnel.h"

shader
fresnel_dielectric_node
 [[ string help = "Output a fresnel factor for dielectric materials" ]]
(
  float IoR = 1.45
    [[ string help = "Index of refraction" ]],

  normal shadingNormal = N,

  output float out = 0
    [[ string help = "Output fresnel term" ]]
)
{
  float f = max(1.0e-5, IoR);
  float eta = backfacing() ? 1.0 / f : f;
  float cosi = dot(I, shadingNormal);

  out = fresnel_dielectric(cosi, eta);
}
